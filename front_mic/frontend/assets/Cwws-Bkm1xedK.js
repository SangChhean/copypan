import{a as D}from"./axios-DsPaXkF5.js";import{j as a,a6 as ee,d as te,a7 as ne,X as c,c as B,ai as g,a8 as b,ac as k,ab as r,aa as d,ao as f,S as K,ae as N,a9 as ae,af as P,al as oe,am as se}from"./index-Dc-7bNr1.js";import{c as le,u as ie}from"./checkAuth-DRjRzhnr.js";import{a as re,b as ce,_ as de,c as ue}from"./ShowMsg-KA7jVWW1.js";import{A as pe}from"./ArrowLeftOutlined-C5b-G1zI.js";import{S as _e}from"./isPlainObject-CjZ0oXuE.js";import{F as me,C as ve}from"./FilterOutlined-BGZYC0Kz.js";import{M as fe}from"./index-C_k8rEGL.js";import{_ as he,a as ge,I as be,B as xe}from"./index-B3D6LelG.js";import{e as ye}from"./index-CVi3Umml.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Col-DLOqwCl2.js";import"./responsiveObserve-32dtUrQu.js";import"./index-BltmkWy7.js";import"./Checkbox-CWfomWSa.js";var ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 161H699.2c-49.1 0-97.1 14.1-138.4 40.7L512 233l-48.8-31.3A255.2 255.2 0 00324.8 161H96c-17.7 0-32 14.3-32 32v568c0 17.7 14.3 32 32 32h228.8c49.1 0 97.1 14.1 138.4 40.7l44.4 28.6c1.3.8 2.8 1.3 4.3 1.3s3-.4 4.3-1.3l44.4-28.6C602 807.1 650.1 793 699.2 793H928c17.7 0 32-14.3 32-32V193c0-17.7-14.3-32-32-32zM324.8 721H136V233h188.8c35.4 0 69.8 10.1 99.5 29.2l48.8 31.3 6.9 4.5v462c-47.6-25.6-100.8-39-155.2-39zm563.2 0H699.2c-54.4 0-107.6 13.4-155.2 39V298l6.9-4.5 48.8-31.3c29.7-19.1 64.1-29.2 99.5-29.2H888v488zM396.9 361H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm223.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c0-4.1-3.2-7.5-7.1-7.5H627.1c-3.9 0-7.1 3.4-7.1 7.5zM396.9 501H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm416 0H627.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5z"}}]},name:"read",theme:"outlined"};function T(s){for(var l=1;l<arguments.length;l++){var i=arguments[l]!=null?Object(arguments[l]):{},u=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(i).filter(function(_){return Object.getOwnPropertyDescriptor(i,_).enumerable}))),u.forEach(function(_){Ce(s,_,i[_])})}return s}function Ce(s,l,i){return l in s?Object.defineProperty(s,l,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[l]=i,s}var p=function(l,i){var u=T({},l,i.attrs);return a(ee,T({},u,{icon:ke}),null)};p.displayName="ReadOutlined";p.inheritAttrs=!1;const C=s=>(oe("data-v-d37e7fe0"),s=s(),se(),s),Oe={key:0},Se={class:"header-pg"},Ie=C(()=>r("div",{style:{"text-align":"center",width:"100%"}},"Collective-writings 搜索",-1)),He=C(()=>r("br",null,null,-1)),Me={class:"content"},ze={class:"search_bar"},Be={style:{width:"80%","max-width":"1000px"}},Re=C(()=>r("div",{style:{margin:"10px"}},null,-1)),Ve={style:{"margin-bottom":"10px"}},Ae={key:0,class:"spin"},je={key:1,class:"search_res"},De=["innerHTML"],Ke=C(()=>r("div",{style:{"margin-bottom":"100px"}},null,-1)),Ne=te({__name:"Cwws",setup(s){le();const{showMsgs:l,showMsgOpen:i,hilights:u,showIndex:_}=ne(ie()),O=c(["1"]),R=c(["sub1","sub2","sub3","sub4","sub5"]),S=c(""),I=c(""),V=c("圣经经文"),A=c(0),x=c(!1),U=c([{key:"1",icon:()=>f(p),label:"倪文集书名",title:"nee_book"},{key:"2",icon:()=>f(p),label:"李文集书名",title:"lee_book"},{key:"3",icon:()=>f(p),label:"新约总论书名",title:"other_book"},{key:"4",icon:()=>f(p),label:"节期纲目书名",title:"feasts_book"},{key:"5",icon:()=>f(p),label:"上河图书名",title:"pano_book"}]),m=c([]),L=()=>{window.history.back()},$=B(()=>{let n;return n=[{title:"书名",dataIndex:"text",width:"60%",sorter:(e,t)=>e.sn-t.sn,defaultSortOrder:"ascend"},{title:"出处",dataIndex:"source"},{title:"查看",dataIndex:"lab",align:"center",width:"100px"}],n}),H=n=>{m.value=[],x.value=!0;let e=I.value,t=S.value,y=O.value[0];if(t=t.trim(),t)u.value=t.split(/ +/g);else{x.value=!1;return}let w=localStorage.getItem("token")||null;D.defaults.headers.common.Authorization=`Bearer ${w}`;let v=new FormData;v.append("input",t),v.append("fwds",e||" "),v.append("index",y),D.post("/api/cws",v).then(M=>{let h=M.data;m.value=h,A.value=h.length,x.value=!1})};function E(n,e,t,y){}const j=B(()=>({pageSizeOptions:["10","20","30","40","50"],showTotal:n=>`共 ${n} 条`})),F=(n,e)=>{var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",n),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},J=B(()=>m.value.length==0),X=()=>{let n=[];for(let e=0;e<m.value.length;e++){let t=m.value[e];t.text=t.text.replace(/<[^>]+>/g,""),n.push(t)}return n},q=()=>{let n=V.value+".json",e=JSON.stringify(X(),null,2);F(n,e)},G=n=>{V.value=n.item.originItemValue.label,H()},Q=n=>{l.value=n,i.value=!0};return(n,e)=>{const t=he,y=fe,w=ce,v=ge,M=be,h=xe,W=ye,Y=de,Z=ue;return g(_)?(b(),k("div",Oe,[r("div",Se,[r("div",{onClick:L,class:"back"},[a(g(pe))]),Ie]),a(t,{style:{margin:"10px 0"}}),a(Z,{wrap:!1},{default:d(()=>[a(w,{flex:"250px"},{default:d(()=>[r("div",null,[a(y,{openKeys:R.value,"onUpdate:openKeys":e[0]||(e[0]=o=>R.value=o),selectedKeys:O.value,"onUpdate:selectedKeys":e[1]||(e[1]=o=>O.value=o),style:{width:"240px"},mode:"inline",items:U.value,forceSubMenuRender:!0,onSelect:G},null,8,["openKeys","selectedKeys","items"]),He])]),_:1}),a(w,{flex:"auto",class:"res"},{default:d(()=>[r("div",Me,[r("div",ze,[r("div",Be,[a(v,{value:S.value,"onUpdate:value":e[2]||(e[2]=o=>S.value=o),placeholder:"请输入搜索词，多词以空格隔开","enter-button":"",onSearch:H},{prefix:d(()=>[a(g(_e))]),_:1},8,["value"]),Re,a(M,{value:I.value,"onUpdate:value":e[3]||(e[3]=o=>I.value=o),placeholder:"请输入过滤词，多词以空格隔开",onPressEnter:H},{prefix:d(()=>[a(g(me))]),_:1},8,["value"])])]),a(t,{style:{margin:"10px 0"}}),r("div",Ve,[a(h,{type:"primary",onClick:q,disabled:J.value,icon:f(g(ve))},{default:d(()=>[K("下载结果 (共 "+N(A.value)+" 条)",1)]),_:1},8,["disabled","icon"])]),x.value?(b(),k("div",Ae,[a(W,{tip:"加载中……",size:"large"})])):(b(),k("div",je,[a(Y,{columns:$.value,"data-source":m.value,pagination:j.value,"onUpdate:pagination":e[4]||(e[4]=o=>j.value=o),onChange:E,bordered:""},{bodyCell:d(({column:o,record:z})=>[o.dataIndex==="text"?(b(),k("div",{key:0,innerHTML:z[o.dataIndex]},null,8,De)):o.dataIndex==="lab"?(b(),ae(h,{key:1,onClick:Pe=>Q(z.msg)},{default:d(()=>[K(N(z[o.dataIndex]),1)]),_:2},1032,["onClick"])):P("",!0)]),_:1},8,["columns","data-source","pagination"])]))])]),_:1})]),_:1}),Ke,a(re)])):P("",!0)}}}),tt=we(Ne,[["__scopeId","data-v-d37e7fe0"]]);export{tt as default};
