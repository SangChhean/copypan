import{a as C}from"./axios-DsPaXkF5.js";import"./checkAuth-DRjRzhnr.js";import{s as c}from"./Dialog-CK7W8Unc.js";import{U as y}from"./UserOutlined-Daf04qyt.js";import{L as F}from"./LockOutlined-BhM6jK7n.js";import{_ as B,I as U,b as z,B as A}from"./index-B3D6LelG.js";import{_ as L,F as T}from"./index-DBO0YXhw.js";import{C as Z}from"./index-BltmkWy7.js";import{C as $}from"./index-DxYgY4RP.js";import{d as D,r as N,c as V,a8 as q,ac as E,ab as l,j as t,aa as a,ai as u,S as d,al as O,am as j}from"./index-Dc-7bNr1.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-C_k8rEGL.js";import"./isPlainObject-CjZ0oXuE.js";import"./useRefs-DACiqc7r.js";import"./Col-DLOqwCl2.js";import"./responsiveObserve-32dtUrQu.js";import"./Checkbox-CWfomWSa.js";const f=p=>(O("data-v-c3d020a8"),p=p(),j(),p),M={id:"login"},H={id:"form"},J=f(()=>l("div",{id:"title"},"登录",-1)),K=f(()=>l("span",null,"还没有账号？",-1)),P=D({__name:"Login",setup(p){localStorage.removeItem("token");const s=N({username:"",password:"",remember:!1}),g=(o,e,m)=>{var n=new Date;n.setTime(n.getTime()+m*24*60*60*1e3);var r="expires="+n.toGMTString();document.cookie=o+"="+e+"; "+r},h=o=>{localStorage.setItem("token",o),g("session",o,30),window.location.href="/"},b=o=>{let e=new FormData;e.append("username",o.username),e.append("password",o.password),e.append("remember",String(o.remember)),C.post("/api/token",e).then(m=>{let n=m.data;if(n){let r=n.access_token;h(r)}else c("密码或用户名错误")}).catch(m=>{c("密码或用户名错误")})},v=o=>{},w=V(()=>{let o=s.username.trim(),e=s.password.trim();return o.length<3||o.length>16||/^[a-zA-Z0-9_]+$/.test(o)==!1||e.length<6||e.length>16||/^[a-zA-Z0-9_]+$/.test(e)==!1});return(o,e)=>{const m=B,n=U,r=L,k=z,x=Z,_=A,I=T,S=$;return q(),E("div",M,[l("div",H,[t(S,{hoverable:!0},{default:a(()=>[J,t(m),t(I,{model:s,name:"normal_login",class:"login-form",onFinish:b,onFinishFailed:v},{default:a(()=>[t(r,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入您的用户名!"},{min:3,message:"密码不能少于3位"},{max:16,message:"密码不能超过16位"},{pattern:/^[a-zA-Z0-9_]+$/,message:"密码只能包含字母、数字、下划线"}]},{default:a(()=>[t(n,{value:s.username,"onUpdate:value":e[0]||(e[0]=i=>s.username=i)},{prefix:a(()=>[t(u(y),{class:"site-form-item-icon"})]),_:1},8,["value"])]),_:1}),t(r,{label:"密　码",name:"password",rules:[{required:!0,message:"请输入您的密码!"},{min:6,message:"密码不能少于6位"},{max:16,message:"密码不能超过16位"},{pattern:/^[a-zA-Z0-9_]+$/,message:"密码只能包含字母、数字、下划线"}]},{default:a(()=>[t(k,{value:s.password,"onUpdate:value":e[1]||(e[1]=i=>s.password=i)},{prefix:a(()=>[t(u(F),{class:"site-form-item-icon"})]),_:1},8,["value"])]),_:1}),t(r,null,{default:a(()=>[t(r,{name:"remember","no-style":""},{default:a(()=>[t(x,{checked:s.remember,"onUpdate:checked":e[2]||(e[2]=i=>s.remember=i)},{default:a(()=>[d("30天内免登录")]),_:1},8,["checked"])]),_:1})]),_:1}),t(r,null,{default:a(()=>[t(_,{disabled:w.value,type:"primary","html-type":"submit",class:"login-form-button"},{default:a(()=>[d(" 登录 ")]),_:1},8,["disabled"]),K,t(_,{type:"primary",href:"#signup"},{default:a(()=>[d("注册")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])])}}}),_e=G(P,[["__scopeId","data-v-c3d020a8"]]);export{_e as default};
