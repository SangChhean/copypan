import{a as I}from"./axios-DsPaXkF5.js";import"./checkAuth-DRjRzhnr.js";import{s as z,a as A}from"./Dialog-CK7W8Unc.js";import{U as C}from"./UserOutlined-Daf04qyt.js";import{L as c}from"./LockOutlined-BhM6jK7n.js";import{_ as F,I as S,b as Z,B as $}from"./index-B3D6LelG.js";import{_ as y,F as B}from"./index-DBO0YXhw.js";import{C as U}from"./index-DxYgY4RP.js";import{d as k,r as q,c as N,a8 as P,ac as V,ab as l,j as a,aa as s,ai as i,S as f,al as D,am as E}from"./index-Dc-7bNr1.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-C_k8rEGL.js";import"./isPlainObject-CjZ0oXuE.js";import"./useRefs-DACiqc7r.js";import"./Col-DLOqwCl2.js";import"./responsiveObserve-32dtUrQu.js";const g=p=>(D("data-v-ce3ac650"),p=p(),E(),p),O={id:"login"},j={id:"form"},T=g(()=>l("div",{id:"title"},"修改密码",-1)),G=g(()=>l("span",null,"还没有账号？",-1)),H=k({__name:"ChangePass",setup(p){const t=q({username:"",old_password:"",new_password:""}),w=o=>{let e=new FormData;e.append("username",o.username),e.append("old_pass",o.old_password),e.append("new_pass",o.new_password),I.post("/api/changePass",e).then(n=>{let r=n.data;r?r.code=="0"?z(r.msg):A(r.msg,"/login"):alert("密码或用户名错误")}).catch(n=>{alert("密码或用户名错误")})},h=o=>{},v=N(()=>{let o=t.username.trim(),e=t.old_password.trim(),n=t.new_password.trim();return o.length<3||o.length>16||/^[a-zA-Z0-9_]+$/.test(o)==!1||e.length<6||e.length>16||/^[a-zA-Z0-9_]+$/.test(e)==!1||n.length<6||n.length>16||/^[a-zA-Z0-9_]+$/.test(n)==!1});return(o,e)=>{const n=F,r=S,_=y,d=Z,u=$,b=B,x=U;return P(),V("div",O,[l("div",j,[a(x,{hoverable:!0},{default:s(()=>[T,a(n),a(b,{model:t,name:"normal_login",class:"login-form",onFinish:w,onFinishFailed:h},{default:s(()=>[a(_,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入您的用户名!"},{min:3,message:"密码不能少于3位"},{max:16,message:"密码不能超过16位"},{pattern:/^[a-zA-Z0-9_]+$/,message:"密码只能包含字母、数字、下划线"}]},{default:s(()=>[a(r,{value:t.username,"onUpdate:value":e[0]||(e[0]=m=>t.username=m)},{prefix:s(()=>[a(i(C),{class:"site-form-item-icon"})]),_:1},8,["value"])]),_:1}),a(_,{label:"原密码",name:"old_password",rules:[{required:!0,message:"请输入您的原密码!"},{min:6,message:"密码不能少于6位"},{max:16,message:"密码不能超过16位"},{pattern:/^[a-zA-Z0-9_]+$/,message:"密码只能包含字母、数字、下划线"}]},{default:s(()=>[a(d,{value:t.old_password,"onUpdate:value":e[1]||(e[1]=m=>t.old_password=m)},{prefix:s(()=>[a(i(c),{class:"site-form-item-icon"})]),_:1},8,["value"])]),_:1}),a(_,{label:"新密码",name:"new_password",rules:[{required:!0,message:"请输入您的新密码!"},{min:6,message:"密码不能少于6位"},{max:16,message:"密码不能超过16位"},{pattern:/^[a-zA-Z0-9_]+$/,message:"密码只能包含字母、数字、下划线"}]},{default:s(()=>[a(d,{value:t.new_password,"onUpdate:value":e[2]||(e[2]=m=>t.new_password=m)},{prefix:s(()=>[a(i(c),{class:"site-form-item-icon"})]),_:1},8,["value"])]),_:1}),a(_,null,{default:s(()=>[a(u,{disabled:v.value,type:"primary","html-type":"submit",class:"login-form-button"},{default:s(()=>[f(" 提交 ")]),_:1},8,["disabled"]),G,a(u,{type:"primary",href:"#signup"},{default:s(()=>[f("注册")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])])}}}),me=L(H,[["__scopeId","data-v-ce3ac650"]]);export{me as default};
