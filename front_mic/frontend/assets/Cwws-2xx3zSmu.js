import{a as U}from"./axios-DsPaXkF5.js";import{d as Z,a7 as ee,X as s,c as O,ai as m,a8 as v,a9 as x,ab as l,j as o,aa as d,ao as r,S as V,af as A,ae as te,ag as D,al as ae,am as oe}from"./index-B40VE47m.js";import{c as ne,u as le}from"./checkAuth-CI9FN3Gw.js";import{a as se,P as u,b as ie,_ as de,c as re}from"./ShowMsg-BJC56ze2.js";import{A as ue}from"./ArrowLeftOutlined-B926FXVz.js";import{S as ce}from"./isPlainObject-DCSg3lHu.js";import{F as pe,C as _e}from"./FilterOutlined-iJqCtM3q.js";import{M as me}from"./index-C23JmztS.js";import{_ as ve,a as fe,I as he,B as be}from"./index-CA-v4yTY.js";import{e as ye}from"./index-go3F5PcA.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Col-DAx59QfC.js";import"./responsiveObserve-CBihkVp2.js";import"./index-BBjsuox9.js";import"./Checkbox-FWO0SDnB.js";const g=f=>(ae("data-v-3621dc59"),f=f(),oe(),f),ge={key:0},ke={class:"header-pg"},we=g(()=>l("div",{style:{"text-align":"center",width:"100%"}},"新约职事的词典搜索",-1)),Ce=g(()=>l("br",null,null,-1)),Ie={class:"content"},Se={class:"search_bar"},Oe={style:{width:"80%","max-width":"1000px"}},Be=g(()=>l("div",{style:{margin:"10px"}},null,-1)),Ke={style:{"margin-bottom":"10px"}},Me={key:0,class:"spin"},Te={key:1,class:"search_res"},Ue=["innerHTML"],Ve=g(()=>l("div",{style:{"margin-bottom":"100px"}},null,-1)),Ae=Z({__name:"Cwws",setup(f){ne();const{showMsgs:N,showMsgOpen:R,hilights:L,showIndex:$}=ee(le()),h=s(["1"]),B=s(["sub1","sub2","sub3","sub4","sub5"]),k=s(""),w=s(""),K=s("圣经经文"),M=s(0),b=s(!1),z=s([{key:"1",icon:()=>r(u),label:"圣经经文",title:"verse"},{key:"2",icon:()=>r(u),label:"圣经注解",title:"note"},{key:"3",icon:()=>r(u),label:"生命读经",title:"life"},{key:"sub1",icon:()=>r(u),label:"倪文集",title:"nee",children:[{key:"4",label:"倪文集书名",title:"nee_book"},{key:"5",label:"倪文集篇题",title:"nee_title"}]},{key:"sub2",icon:()=>r(u),label:"李文集",title:"lee",children:[{key:"6",label:"李文集书名",title:"lee_book"},{key:"7",label:"李文集篇题",title:"lee_title"}]},{key:"sub3",icon:()=>r(u),label:"其他",title:"other",children:[{key:"8",label:"新约总论书名",title:"other_book"},{key:"9",label:"新约总论篇题",title:"other_title"},{key:"10",label:"真理/生命课程、时代先见",title:"other_title"}]},{key:"sub4",icon:()=>r(u),label:"节期纲目",title:"feasts",children:[{key:"11",label:"节期纲目书名",title:"feasts_book"},{key:"12",label:"节期纲目篇题",title:"feasts_title"}]}]),c=s([]),E=()=>{window.history.back()},F=O(()=>{let a;return h.value[0]=="1"?a=[{title:"出处",dataIndex:"source",sorter:(e,i)=>e.sn-i.sn,defaultSortOrder:"ascend",width:"120px"},{title:"经文",dataIndex:"text"}]:a=[{title:"题目",dataIndex:"text",sorter:(e,i)=>e.sn-i.sn,defaultSortOrder:"ascend"},{title:"出处",dataIndex:"source",width:"50%"},{title:"查看",dataIndex:"lab",align:"center",width:"100px"}],a}),C=a=>{c.value=[],b.value=!0;let t=w.value,e=k.value,i=h.value[0];if(e=e.trim(),e)L.value=e.split(/ +/g);else{b.value=!1;return}let y=localStorage.getItem("token")||null;U.defaults.headers.common.Authorization=`Bearer ${y}`;let p=new FormData;p.append("input",e),p.append("fwds",t||" "),p.append("index",i),U.post("/api/cws",p).then(I=>{let _=I.data;c.value=_,M.value=_.length,b.value=!1})};function P(a,t,e,i){}const T=O(()=>({pageSizeOptions:["10","20","30","40","50"],showTotal:a=>`共 ${a} 条`})),j=(a,t)=>{var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("download",a),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},H=O(()=>c.value.length==0),J=()=>{let a=[];for(let t=0;t<c.value.length;t++){let e=c.value[t];e.text=e.text.replace(/<[^>]+>/g,""),a.push(e)}return a},X=()=>{let a=K.value+".json",t=JSON.stringify(J(),null,2);j(a,t)},q=a=>{K.value=a.item.originItemValue.label,C()},G=a=>{N.value=a,R.value=!0};return(a,t)=>{const e=ve,i=me,y=ie,p=fe,I=he,_=be,Q=ye,W=de,Y=re;return m($)?(v(),x("div",ge,[l("div",ke,[l("div",{onClick:E,class:"back"},[o(m(ue))]),we]),o(e,{style:{margin:"10px 0"}}),o(Y,{wrap:!1},{default:d(()=>[o(y,{flex:"250px"},{default:d(()=>[l("div",null,[o(i,{openKeys:B.value,"onUpdate:openKeys":t[0]||(t[0]=n=>B.value=n),selectedKeys:h.value,"onUpdate:selectedKeys":t[1]||(t[1]=n=>h.value=n),style:{width:"240px"},mode:"inline",items:z.value,forceSubMenuRender:!0,onSelect:q},null,8,["openKeys","selectedKeys","items"]),Ce])]),_:1}),o(y,{flex:"auto",class:"res"},{default:d(()=>[l("div",Ie,[l("div",Se,[l("div",Oe,[o(p,{value:k.value,"onUpdate:value":t[2]||(t[2]=n=>k.value=n),placeholder:"请输入搜索词，多词以空格隔开","enter-button":"",onSearch:C},{prefix:d(()=>[o(m(ce))]),_:1},8,["value"]),Be,o(I,{value:w.value,"onUpdate:value":t[3]||(t[3]=n=>w.value=n),placeholder:"请输入过滤词，多词以空格隔开",onPressEnter:C},{prefix:d(()=>[o(m(pe))]),_:1},8,["value"])])]),o(e,{style:{margin:"10px 0"}}),l("div",Ke,[o(_,{type:"primary",onClick:X,disabled:H.value,icon:r(m(_e))},{default:d(()=>[V("下载结果 (共 "+A(M.value)+" 条)",1)]),_:1},8,["disabled","icon"])]),b.value?(v(),x("div",Me,[o(Q,{tip:"加载中……",size:"large"})])):(v(),x("div",Te,[o(W,{columns:F.value,"data-source":c.value,pagination:T.value,"onUpdate:pagination":t[4]||(t[4]=n=>T.value=n),onChange:P,bordered:""},{bodyCell:d(({column:n,record:S})=>[n.dataIndex==="text"?(v(),x("div",{key:0,innerHTML:S[n.dataIndex]},null,8,Ue)):n.dataIndex==="lab"?(v(),te(_,{key:1,onClick:De=>G(S.msg)},{default:d(()=>[V(A(S[n.dataIndex]),1)]),_:2},1032,["onClick"])):D("",!0)]),_:1},8,["columns","data-source","pagination"])]))])]),_:1})]),_:1}),Ve,o(se)])):D("",!0)}}}),We=xe(Ae,[["__scopeId","data-v-3621dc59"]]);export{We as default};
